#include "../util.fc";
#include "../../../imports/stdlib.fc";

() test(slice in_msg) impure method_id (1) {

    cell init_dict = in_msg~load_dict()
        .udict_set(64, 37, wrap_in_cell(5));

    (cell delete_dict, slice value, int found) = init_dict.udict_delete_get?(64, 37);
    throw_unless(400, found);
    throw_unless(401, value.preload_int(64) == 5);


    (_, int found2) = delete_dict.udict_get?(64, 37);
    throw_unless(402, ~ found2);

    throw(500); ;; successfull execution
}

() main(slice in_msg) {
    test(in_msg);
    return ();
}
