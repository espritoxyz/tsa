#include "../../imports/stdlib.fc";

() recv_internal() impure {
    slice ds = get_data().begin_parse();
    int flag = ds~load_uint(1);
    int old_time = ds~load_uint(32);
    int time = now();

    if (flag & (time - old_time > 60)) {
        throw(12345);
    }

    cell new_data = begin_cell()
        .store_uint(1, 1)
        .store_uint(time, 32)
        .end_cell();

    set_data(new_data);
}
